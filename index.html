<html>
<head>
<script type="text/javascript">
    (function(p,u,s,h){
        p._pcq=p._pcq||[];
        p._pcq.push(['_currentTime',Date.now()]);
        s=u.createElement('script');
        s.type='text/javascript';
        s.async=true;
        s.src='https://cdn.pushcrew.com/js/3680c4bdbefedd471b12397ba717757e.js';
        h=u.getElementsByTagName('script')[0];
        h.parentNode.insertBefore(s,h);
    })(window,document);
    </script>
    <!--<script>
    _pcq.push(['APIReady', callbackFunction]);

//some code here

function callbackFunction() {
      console.log(pushcrew.subscriberId); 
}
    </script>
    <script>
window._pcq.push(['triggerOptIn',{subscriberSegment: 'homepage', modal: {text: 'Get instant alerts from our website. Please subscribe.', blackenBackground: true}}]);     
</script>

    <script>      
window._pcq = window._pcq || [];
_pcq.push(['subscriptionSuccessCallback',callbackFunctionOnSuccessfulSubscription]);
function callbackFunctionOnSuccessfulSubscription(subscriberId, values) {
    console.log('User got successfully subscribed.');
    console.log(subscriberId); 

    console.log(values.status);

    console.log(values.message) 

    console.log('Now you may run code which should be executed once user gets successfully subscribed.');
}
    </script>
   
    <script>
        window._pcq = window._pcq || [];
_pcq.push(['subscriptionFailureCallback',callbackFunctionOnFailedSubscription]); //registers callback function to be called when user gets successfully subscribed

function callbackFunctionOnFailedSubscription(values) {
    console.log('User could not get subscribed to push notifications');

    console.log(values.status); // BLOCKED , UNSUBSCRIBED or CANCELLED

    console.log(values.message) // 'User has blocked push notifications.', 'User has unsubscribed from push notifications', 'No change in subscription. Child window was closed.' or 'User has closed the notifications opt-in.'

    console.log('Now you may run code which should be executed once user subscription fails');
}
    </script>

    <script>
        window._pcq = window._pcq || [];
_pcq.push(['APIReady', callbackOnAPIReady]); //will execute callback function when PushCrew API is ready

function callbackOnAPIReady() {
    //now api is ready
    _pcq.push(['addSubscriberToSegment', 'home page', callbackForAddToSegment]);
}

function callbackForAddToSegment(response) {
    if(response === -1) {
        console.log('User is not a subscriber or has blocked notifications');
    }
  
    if(response === false) {
        console.log('Segment name provided is not valid. Maximum length of segment name can be 30 chars and it can only contain alphanumeric characters, underscore and dash.');
    }
  
    if(response === true) {
        console.log('User got added to the segment successfully. Now you may run any code you wish to execute after user gets added to segment successfully');
    }
}
    </script>

    <script>
        window._pcq = window._pcq || [];
_pcq.push(['APIReady', callbackOnAPIReady]); //will execute callback function when PushCrew API is ready

_pcq.push(['subscriptionSuccessCallback',callbackOnSuccessfulSubscription]); //registers callback function to be called when user gets successfully subscribed

function callbackOnAPIReady() {
    //now api is ready
    _pcq.push(['addSubscriberToSegment', 'homepage', callbackForAddToSegment]);
}

function callbackOnSuccessfulSubscription(subscriberId, values) {
    //user just got subscribed
    _pcq.push(['addSubscriberToSegment', 'homepage', callbackForAddToSegment]);
}

function callbackForAddToSegment(response) {
    if(response === -1) {
        console.log('User is not a subscriber or has blocked notifications');
    }
  
    if(response === false) {
        console.log('Segment name provided is not valid. Maximum length of segment name can be 30 chars and it can only contain alphanumeric characters, underscore and dash.');
    }
  
    if(response === true) {
        console.log('User got added to the segment successfully. Now you may run any code you wish to execute after user gets added to segment successfully');
    }
}
    </script>
    -->
    <script>
        window._pcq = window._pcq || [];
_pcq.push(['APIReady', callbackOnAPIReady]); //will execute callback function when PushCrew API is ready

_pcq.push(['subscriptionSuccessCallback',callbackOnSuccessfulSubscription]); //registers callback function to be called when user gets successfully subscribed

function addToAppropriateSegment() {
    if(window.location.href.indexOf("another_page") > -1) {
        _pcq.push(['addSubscriberToSegment', 'another_page']);
        console.log('User is subscribed to another_page');
    }
    else if(window.location.host==="itantrik.github.io" && (window.location.pathname === "/" || window.location.pathname === "/index.html")) {
        _pcq.push(['addSubscriberToSegment', 'homepage']);
        console.log('User is subscribed to homepage');
    }
   
}

function callbackOnAPIReady() {
   addToAppropriateSegment();
}

function callbackOnSuccessfulSubscription(subscriberId, values) {
   addToAppropriateSegment();
}
    </script>
</head>
<body>
    
This is Saurabh Gangwal's private site! No trespassing allowed!!!
   <p> Pushcrew testing in progress. </p>
     <p> Wingifighter!!! :) </p>
    <p> <a href="another_page.html">Click to get another page</a>
</body>
</html>
